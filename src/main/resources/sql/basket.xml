<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="basket">

    <insert id="basketInsert">
        insert into basket(
            pro_no, id, price, ea
        ) values (
                     #{pro_no},#{id},#{price},#{ea}
                 )
    </insert>

<!-- 01 장바구니 리스트 -->
    <select id="basketList" parameterType="int" resultType="com.project.withpet.model.Basket">
        select
            product.pro_no as pro_no,
            product.pro_name as pro_name,
            member.id as id,
            product.price as price,
            basket.ea as ea,
            product.PRO_NAME,
            product.PRO_IMG,
            product.STOCK,
            (price * ea ) money
        from
            Product product, MEMBER member, BASKET basket
        where product.pro_no = basket.pro_no
          and member.id = basket.id
        order by product.pro_no
    </select>

    <!-- 01-1 장바구니 값 합산-->
    <select id="sumMoney" resultType="int">
        SELECT NVL(SUM(product.price * STOCK), 0) money
        FROM
            basket basket, product product
        WHERE
            product.pro_no = basket.pro_no AND basket.id = #{Id}
    </select>




</mapper>